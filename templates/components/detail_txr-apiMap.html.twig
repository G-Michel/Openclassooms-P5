<script>
    var map;
    function initMap() {

      {{ include('components/styled_map.html.twig') }}

      var france = {lat: 46.86667, lng: 2.21375};

      map = new google.maps.Map(document.getElementById('map'), {
        zoom:6,
        center: france,
        mapTypeControlOptions: {
          mapTypeIds: []// Ex : ['roadmap', 'satellite', 'hybrid', 'terrain','styled_map']
        }
      });
      map.data.loadGeoJson("{{ path('jsonTaxref',{'taxref': post.id}) }}",null,function(response){

        var markers = response.map(function(location, i) {
          var coordinates = location.getGeometry().get();
          var latLng = new google.maps.LatLng(coordinates.lat(),coordinates.lng());
          return new google.maps.Marker({
            position: latLng,
            animation: google.maps.Animation.DROP,
            icon: "{{ asset('images/map/marker.svg') }}"
          });
        });

        var markerCluster = new MarkerClusterer(
          map,
          markers,
          {
            imagePath: "{{ asset('images/map/m') }}"
          }
        );
      });

      map.data.setStyle({visible: false});
      //Associate the styled map with the MapTypeId and set it to display.
      map.mapTypes.set('styled_map', styledMapType);
      map.setMapTypeId('styled_map');
    }
  </script>